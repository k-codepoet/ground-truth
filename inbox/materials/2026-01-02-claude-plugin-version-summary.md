---
title: "Claude Code 플러그인 버전/업데이트 논의 요약"
date: 2026-01-02
source: "Claude 대화 (플러그인 버전 관리 질의)"
type: conversation
status: raw
used_in:
---

## 1. 발단

- 사용 맥락: 사용자는 Claude Code용 커스텀 플러그인과 마켓플레이스를 직접 운영하고 있음.
- 문제 상황: 플러그인에 command를 추가하고 마켓플레이스를 재배포했는데도, Claude 쪽에서 새로운 command가 반영되지 않는 현상을 경험함.
- 핵심 질문:
  - "마켓플레이스 재배포만으로는 왜 적용이 안 되지?"
  - "수정점이 생길 때마다 플러그인 버전을 꼭 변경해야 하는가?"

## 2. 원인 후보와 동작 메커니즘 이해

- 로컬 캐시:
  - Claude Code는 설치 시 플러그인 파일을 로컬 디렉터리에 캐시해 두고 그 복사본을 사용함.
  - 마켓플레이스 원격 저장소만 업데이트해도, 로컬 캐시가 갱신되지 않으면 기존 command/skills 목록이 그대로 유지될 수 있음.
- Git ref(브랜치/태그) 고정:
  - 마켓플레이스를 `owner/repo#v1.0.0` 같이 특정 태그(ref)로 등록한 경우, 코드만 수정하고 태그를 안 바꾸면 Claude 입장에서는 "같은 버전"으로 인식할 여지가 있음.
  - 브랜치(`main` 등)를 바라보게 설정하면 HEAD 기준으로는 갱신되지만, 여전히 로컬 캐시 문제가 남을 수 있음.
- 업데이트 플로우:
  - 공식 문서는 "마켓플레이스 추가/업데이트 → 플러그인 설치/재설치 → 필요 시 캐시 삭제" 흐름을 안내하고 있음.
  - 설치 후 변경 사항이 보이지 않을 경우, `~/.claude/plugins/cache` 삭제 후 Claude 재시작 및 플러그인 재설치를 권장함.

## 3. 버전 필드에 대한 공식 가이드

- 플러그인 manifest:
  - `.claude-plugin/plugin.json` 스키마에서 `version` 필드는 필수(required)로 정의됨.
  - 예시 manifest에서도 `"version": "1.0.0"` 형태를 사용하고, 시맨틱 버저닝(예: 1.2.0)을 권장함.
- 공식 문서의 표현:
  - "Track releases using semantic versioning in your plugin.json"과 같이, 변경 사항 릴리스 관리 목적으로 버전 필드를 활용하라고 안내함.
  - 다만 "수정이 있을 때마다 반드시 버전을 올리지 않으면 업데이트가 동작하지 않는다"는 식의 하드 규칙 문장은 없음.
- 해석:
  - Claude Code 자체가 "버전 번호가 달라야만 업데이트 허용"이라고 강제하는 것은 아니라, Git ref + 캐시 조합으로 동작함.
  - 그러나 팀/마켓플레이스 운영 관점에서는, 변경 시 버전을 올리고 필요하면 새 태그(ref)를 발행하는 패턴이 사실상의 베스트 프랙티스로 자리 잡은 상태임.

## 4. 실무적인 의사결정 포인트

### 4.1. 버전을 언제 올릴지

- 올리는 쪽이 좋은 경우:
  - 팀/외부 사용자와 마켓플레이스를 공유하는 경우("지금 어떤 버전을 쓰고 있는지"를 명확히 하기 위함).
  - BREAKING 변경(명령 이름/파라미터 변경, 동작 방식 변경 등)이 있는 경우.
  - Git 태그 기반으로 마켓플레이스를 가리키고 있고, 안정적인 릴리스 단위를 만들고 싶을 때.
- 생략할 수 있는 경우(실무 타협):
  - 혼자 쓰는 플러그인이고, `main` 브랜치 HEAD를 바라보게 해둔 상태에서 자주 수정하며 테스트하는 경우.
  - 다만 이 경우에도 캐시/재설치 이슈로 인해 "코드 고침 → 바로 보임"이 항상 보장되지는 않음.

### 4.2. 업데이트가 안 보일 때의 실질적인 해결 절차

1. 마켓플레이스 갱신:
   - `/plugin marketplace update <marketplace-name>` 실행.
2. 플러그인 재설치:
   - `/plugin uninstall plugin-name@marketplace-name`
   - `/plugin install plugin-name@marketplace-name`
3. 그래도 반영이 안 될 때:
   - `rm -rf ~/.claude/plugins/cache`
   - Claude Code 재시작 후 플러그인 재설치.
4. 팀/공유 환경이라면:
   - manifest `version`을 증가시키고, Git 태그(예: `v0.1.1`)를 새로 만들어 마켓플레이스 ref를 그 태그로 지정하는 패턴을 추천.

## 5. 이 대화에서 내린 결론(핵심)

- 핵심 문제:
  - "마켓플레이스를 재배포해도 플러그인 command 추가가 바로 안 보인다"의 직접적인 원인은 **로컬 캐시 + Git ref 고정 조합일 가능성이 크다**.
- 버전 필드에 대한 결론:
  - 공식 문서는 플러그인 manifest에서 **버전 필드를 필수로 정의하고 시맨틱 버전 사용을 권장**한다.
  - 다만 "버전을 안 올리면 아예 업데이트가 불가능하다"는 규칙은 아니며, Git ref/캐시를 통해서도 업데이트는 이뤄질 수 있다.
  - 현실적인 운영에서는 **버전 증가 + 새 Git 태그 발행 + 마켓플레이스 ref 갱신** 패턴이 관리·디버깅에 유리하므로, 이를 기본 플로우로 채택하는 것이 합리적이다.
- 요약된 의사결정:
  - 개인용/실험 단계: 브랜치 HEAD를 바라보되, 필요 시 캐시 삭제·재설치로 즉시 반영.
  - 팀/프로덕션:
    - manifest `version`을 변경하고, Git 태그를 새로 만든 뒤 마켓플레이스 ref를 새 태그로 지정.
    - 사용자 가이드에는 "업데이트 후에도 안 보이면 캐시 삭제 + 재설치"를 같이 안내.
