---
id: game-loop
title: 게임 루프
description: 게임의 심장박동

concepts:
  - 입력 처리
  - 업데이트
  - 렌더링
  - FPS 제어
  - 고정 타임스텝
  - 가변 타임스텝

usedIn:
  - 모든 게임

exportable:
  web: true
  blog: true
  resume: false
---

# 게임 루프

게임 엔진의 핵심은 게임 루프입니다. 매 틱(또는 프레임)마다 입력 처리부터 렌더링까지 모든 작업이 순차적으로 실행됩니다.

## 기본 구조

```
while (gameIsRunning) {
    processInput();
    update(deltaTime);
    render();
}
```

## 한 틱 안에서 일어나는 일

### 1. 입력 처리 (Input)

키보드, 마우스, 게임패드 입력을 수집하고 처리합니다.

- 키 입력 큐 처리
- 마우스 델타 계산
- 네트워크 입력 패킷 수신

### 2. 게임 로직 (Update)

AI, 스킬 쿨다운, 버프/디버프, 스폰 등 게임 규칙을 실행합니다.

- AI 의사결정
- 타이머/쿨다운 갱신
- 상태 머신 전이
- 이벤트 처리

### 3. 물리 시뮬레이션 (Physics)

충돌 감지, 강체 역학, 캐릭터 컨트롤러를 처리합니다.

- 충돌 감지 및 응답
- 중력/속도 적용
- 레이캐스트
- 조인트/컨스트레인트

### 4. 네트워크 (Network)

상태 동기화, 패킷 전송/수신, RPC 호출을 처리합니다.

- 상태 스냅샷 전송
- 입력 패킷 전송
- Lag Compensation
- 보간 데이터 준비

### 5. 렌더링 준비 (Late Update)

카메라 추적, UI 갱신, 애니메이션 블렌딩 등 렌더링 직전 작업을 수행합니다.

- 카메라 위치 계산
- LOD 결정
- 컬링
- 애니메이션 상태 갱신

### 6. 렌더링 (Render)

화면에 그립니다.

- 드로우콜 제출
- 셰이더 실행
- 프레임 버퍼 스왑

## 타임스텝

### 고정 타임스텝 (Fixed Timestep)

시뮬레이션을 일정한 간격(예: 16.67ms)으로 실행합니다.

- **장점**: 결정론적, 안정적인 물리
- **사용처**: 물리 엔진, 네트워크 동기화

### 가변 타임스텝 (Variable Timestep)

실제 경과 시간(delta time)을 사용합니다.

- **장점**: 유연함, 다양한 프레임레이트 지원
- **사용처**: 렌더링, 애니메이션

## 참고 자료

- [Game Programming Patterns: Game Loop](https://gameprogrammingpatterns.com/game-loop.html)
- [Fix Your Timestep!](https://gafferongames.com/post/fix_your_timestep/)
